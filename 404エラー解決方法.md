# 404エラー解決方法

## 🔍 問題の症状

- デプロイログにはエラーがない
- ビルドは成功している
- しかし、URLを開くと「404: NOT_FOUND」エラーが表示される

## 🎯 原因

この問題の**最も一般的な原因**は、**Vercelの設定**にあります。特に以下の2つが原因であることが多いです：

1. **Root Directory（ルートディレクトリ）が正しく設定されていない**
2. **Output Directory（出力ディレクトリ）が間違って設定されている**

## ✅ 解決方法（ステップバイステップ）

### ステップ1: Vercelのダッシュボードを開く

1. [Vercelのダッシュボード](https://vercel.com/dashboard)にアクセス
2. ログインします
3. 404エラーが発生しているプロジェクトをクリック

### ステップ2: Settings（設定）を開く

1. プロジェクトページの上部にあるタブから「**Settings**」をクリック
   - タブは以下のような並びになっています：
     ```
     [Overview] [Deployments] [Analytics] [Settings] [Insights]
     ```

### ステップ3: Root Directory（ルートディレクトリ）を確認・修正

1. Settingsページの左側メニューから「**General**」をクリック
2. ページを下にスクロールして、「**Root Directory**」というセクションを探す
3. 「Root Directory」の右側にある「**Edit**」ボタンをクリック
4. 入力欄に **`frontend`** と入力します
   - ⚠️ **重要**: `./frontend` や `/frontend` ではなく、`frontend` とだけ入力してください
5. 「**Save**」ボタンをクリック

**確認ポイント:**
- Root Directoryが `frontend` と表示されていることを確認
- もし `./` や空欄のままの場合は、必ず `frontend` に変更してください

### ステップ4: Build and Output Settings（ビルド設定）を確認・修正

1. 「General」ページをさらに下にスクロール
2. 「**Build and Output Settings**」というセクションを探す
3. 「Build and Output Settings」の右側にある「**Override**」ボタンをクリック
   - もし「Override」ボタンが見当たらない場合は、各項目の右側にある「Edit」ボタンをクリック

4. 以下の設定を確認・変更します：

   | 項目 | 正しい設定値 | 説明 |
   |------|------------|------|
   | **Build Command** | `npm run build` | ビルドコマンド |
   | **Output Directory** | **空欄のまま** | ⚠️ **重要！空欄にしてください** |
   | **Install Command** | `npm install` | 依存関係のインストールコマンド |

5. **特に重要なのは「Output Directory」です**
   - もし `.next` や `out` などの値が入っている場合は、**すべて削除して空欄にしてください**
   - Next.jsの場合、Vercelが自動的に正しい出力ディレクトリを検出します
   - 手動で設定すると、404エラーが発生する原因になります

6. 「**Save**」ボタンをクリック

### ステップ5: 再デプロイを実行

設定を変更した後は、**必ず再デプロイ**を実行する必要があります。

1. プロジェクトページの上部タブから「**Deployments**」をクリック
2. 最新のデプロイを探す
3. デプロイの右側にある「**...**」（三点メニュー）をクリック
4. 「**Redeploy**」を選択
5. 表示されるダイアログで、**「Use existing Build Cache」のチェックを外す**（重要！）
6. 「**Redeploy**」ボタンをクリック
7. デプロイが完了するまで待ちます（通常、2〜5分程度）

### ステップ6: 動作確認

1. デプロイが完了したら（「Ready」と表示される）、URLにアクセス
2. まだ404エラーが表示される場合は、以下を試してください：
   - ブラウザのキャッシュをクリア（Ctrl + Shift + Delete）
   - シークレットモード（プライベートモード）でアクセス
   - 別のブラウザでアクセス

## 📋 設定確認チェックリスト

以下の設定が正しいか確認してください：

- [ ] Root Directory: **`frontend`** と設定されている
- [ ] Build Command: **`npm run build`** と設定されている
- [ ] Output Directory: **空欄**（何も入力されていない）
- [ ] Install Command: **`npm install`** と設定されている
- [ ] 再デプロイを実行した（Build Cacheを無効にして）

## 🚨 よくある間違い

### 間違い1: Root Directoryを `./frontend` と設定した

**問題**: スラッシュ（`/`）やドット（`.`）を含めると、正しく認識されない場合があります。

**解決方法**: `frontend` とだけ入力してください（スラッシュやドットなし）

### 間違い2: Output Directoryに `.next` と設定した

**問題**: Next.jsの場合、Output Directoryを手動で設定すると404エラーが発生します。

**解決方法**: Output Directoryを**空欄**にしてください

### 間違い3: 設定を変更したが、再デプロイを実行しなかった

**問題**: 設定を変更しても、再デプロイしないと変更が反映されません。

**解決方法**: 必ず再デプロイを実行してください（Build Cacheを無効にして）

## 🔍 それでも解決しない場合

### 確認事項1: ビルドログを詳しく確認

1. 「Deployments」タブを開く
2. 最新のデプロイをクリック
3. 「Build Logs」を確認
4. 以下のような行が表示されているか確認：
   ```
   Installing dependencies...
   Running "npm run build" in /vercel/path0/frontend
   ```
   - `/vercel/path0/frontend` というパスが表示されていれば、Root Directoryは正しく設定されています

### 確認事項2: ローカルでビルドを確認

ローカルでビルドが成功するか確認してください：

1. ターミナル（PowerShell）を開く
2. プロジェクトフォルダに移動：
   ```bash
   cd C:\Users\tokam\Downloads\soccer\frontend
   ```
3. 依存関係をインストール：
   ```bash
   npm install
   ```
4. ビルドを実行：
   ```bash
   npm run build
   ```
5. エラーが表示されないことを確認

### 確認事項3: GitHubリポジトリの確認

1. GitHubリポジトリを開く
2. `frontend` フォルダが存在することを確認
3. `frontend/package.json` が存在することを確認
4. `frontend/app/page.tsx` が存在することを確認

## 💡 補足情報

### Root Directoryとは？

Root Directory（ルートディレクトリ）は、Vercelがプロジェクトのコードを探す場所です。

このプロジェクトでは：
- コードは `frontend` フォルダに入っています
- そのため、Root Directoryを `frontend` に設定する必要があります
- もし空欄や `./` のままの場合、Vercelはプロジェクトのルート（`soccer`フォルダ）を探してしまい、`frontend`フォルダ内のコードを見つけられません

### Output Directoryとは？

Output Directory（出力ディレクトリ）は、ビルド結果の出力先です。

Next.jsの場合：
- Vercelが自動的に正しい出力ディレクトリ（`.next`）を検出します
- 手動で設定すると、正しく検出されず、404エラーが発生する原因になります
- そのため、**必ず空欄のまま**にしてください

## 🆘 サポート

それでも解決しない場合は、以下の情報を確認してください：

1. **Vercelの設定画面のスクリーンショット**（Root DirectoryとOutput Directoryの設定）
2. **ビルドログ**（「Deployments」→ 該当デプロイ → 「Build Logs」）
3. **エラーメッセージ**（ブラウザに表示されるエラー）

これらの情報があれば、より具体的な解決策を提案できます。

---

**設定を正しく行えば、404エラーは解決するはずです！頑張ってください！** 🚀
